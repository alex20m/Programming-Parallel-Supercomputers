For Aalto students
Setting work up in Triton
-------------------------

CONNECTING TO TRITON:
---------------------
The recommended connection method for the course is through OnDemand (OOD): 
https://ondemand.triton.aalto.fi/

OOD is accessible from the entire internet and requires no additional setup.

Connecting via ssh is also possible, but only from Aalto networks 
(primarily eduroam) or via Aalto VPN. Due to time constraints, we can't 
promise support for connection methods besides OOD during the course.

More advanced users who want to set up ssh connection can check our 
tutorials at: https://scicomp.aalto.fi/triton/tut/connecting/

MODULE SYSTEM:
--------------

module list
module avail | grep mpi
module spider mpi
module load
module unload
module purge

Settings for the course:

MPI & Hybrid
module load gcc/12.3.0
module load openmpi/4.1.6

CUDA
module load gcc cuda cmake openmpi

C: MPI-compiler wrapper is mpicc
CUDA: nvcc
      Invoking mpi: -lmpi

GitLab:
-------

version.aalto.fi: pps-example-codes
Recommended: set up SSH keys
git clone <copy repo link> repo-dir-name

Disks:
------
quota
$HOME 
$WRKDIR
"Submitting" exercise codes to (TBC later)
/scratch/cs-4690-2022/<username>

SLURM:
------
To run jobs:
sbatch job_script.sh

squeue -u <username>
sinfo -p courses
History of your jobs:
slurm h 

Users who already have Triton accounts may also submit the jobs to
"normal" queues, when they may queue for less time (or maybe more,
depending on the cluster load). To try this, comment out the
#SBATCH -A courses
(Commenting out means using two `##`.  `#SBATCH` is the normal version)


-> pe[10-13] and gpu23+gpu24 reserved for the course. Check out specs from
Triton manual.

Running parallel programs:
srun + args; args parsed from #SBATCH <options> <value>

sacct -j <jobid> will tell you detailes about your job's execution.

scripts-dir: Example scripts for running MPI, MPI + openMP & CUDA + MPI jobs.



See also
--------

About Triton:
https://scicomp.aalto.fi/triton/ref/
https://scicomp.aalto.fi/scicomp/shell/
https://aaltoscicomp.github.io/cheatsheets/triton-cheatsheet.pdf
